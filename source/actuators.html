
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Actuators &#8212; mjlab Documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/twemoji.css" />
    <link rel="stylesheet" type="text/css" href="/home/runner/work/mjlab/mjlab/.venv/lib/python3.13/site-packages/sphinxcontrib/icon/node_modules/@fortawesome/fontawesome-free/css/all.min.css?v=53359634" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="https://unpkg.com/twemoji@latest/dist/twemoji.min.js"></script>
    <script src="../_static/twemoji.js"></script>
    <script src="/home/runner/work/mjlab/mjlab/.venv/lib/python3.13/site-packages/sphinxcontrib/icon/node_modules/@fortawesome/fontawesome-free/js/all.min.js?v=ec35c6c9"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'source/actuators';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Sensors" href="sensors.html" />
    <link rel="prev" title="Observation History and Delay" href="observation.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
    <meta name="docbuild:last-update" content="Jan 28, 2026"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">The mjlab Documentation</p>
  
</a></div>
        <div class="sidebar-primary-item"><ul class="navbar-icon-links"
    aria-label="Quick Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/mujocolab/mjlab" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/mujocolab/mjlab" title="mjlab" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="https://img.shields.io/badge/mjlab-0.1.0-silver.svg" class="icon-link-image" alt="mjlab"/></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://img.shields.io/github/stars/mujocolab/mjlab?color=fedcba" title="Stars" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="https://img.shields.io/github/stars/mujocolab/mjlab?color=fedcba" class="icon-link-image" alt="Stars"/></a>
        </li>
</ul></div>
        <div class="sidebar-primary-item">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="migration_isaac_lab.html">Migrating from Isaac Lab</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">About the Project</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="motivation.html">Why mjlab?</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ &amp; Troubleshooting</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="api/index.html">API Reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="api/envs.html">mjlab.envs</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/scene.html">mjlab.scene</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/sim.html">mjlab.sim</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/entity.html">mjlab.entity</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/actuator.html">mjlab.actuator</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/sensor.html">mjlab.sensor</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/managers.html">mjlab.managers</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/terrains.html">mjlab.terrains</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Core Concepts</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="randomization.html">Domain Randomization</a></li>
<li class="toctree-l1"><a class="reference internal" href="nan_guard.html">NaN Guard</a></li>
<li class="toctree-l1"><a class="reference internal" href="observation.html">Observation History and Delay</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Actuators</a></li>
<li class="toctree-l1"><a class="reference internal" href="sensors.html">Sensors</a></li>
<li class="toctree-l1"><a class="reference internal" href="raycast_sensor.html">RayCast Sensor</a></li>
<li class="toctree-l1"><a class="reference internal" href="distributed_training.html">Distributed Training</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/mujocolab/mjlab" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/mujocolab/mjlab/edit/main/docs/source/actuators.rst" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/mujocolab/mjlab/issues/new?title=Issue%20on%20page%20%2Fsource/actuators.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/source/actuators.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Actuators</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#choosing-an-actuator-type">Choosing an Actuator Type</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tl-dr">TL;DR</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#actuator-interface">Actuator Interface</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#actuator-types">Actuator Types</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#built-in-actuators">Built-in Actuators</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#explicit-actuators">Explicit Actuators</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#xml-actuators">XML Actuators</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#delayed-actuator">Delayed Actuator</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pd-control-and-integrator-choice">PD Control and Integrator Choice</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#built-in-vs-explicit-pd-control">Built-in vs Explicit PD Control</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#integrator-behavior-in-mujoco">Integrator Behavior in MuJoCo</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mjlab-recommendation">mjlab Recommendation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#authoring-actuator-configs">Authoring Actuator Configs</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#computing-hardware-parameters-from-motor-specs">Computing Hardware Parameters from Motor Specs</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-actuators-in-environments">Using Actuators in Environments</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#action-terms">Action Terms</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#domain-randomization">Domain Randomization</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="actuators">
<span id="id1"></span><h1>Actuators<a class="headerlink" href="#actuators" title="Link to this heading">#</a></h1>
<p>Actuators convert high-level commands (position, velocity, effort) into
low-level efforts that drive joints. Implementations use either
built-in actuators (physics engine computes torques and integrates damping
forces implicitly) or explicit actuators (user computes torques explicitly,
integrator cannot account for their velocity derivatives).</p>
<section id="choosing-an-actuator-type">
<h2>Choosing an Actuator Type<a class="headerlink" href="#choosing-an-actuator-type" title="Link to this heading">#</a></h2>
<p><strong>Built-in actuators</strong> (<code class="docutils literal notranslate"><span class="pre">BuiltinPositionActuator</span></code>, <code class="docutils literal notranslate"><span class="pre">BuiltinVelocityActuator</span></code>): Use
MuJoCo’s native implementations. The physics engine computes torques and
integrates damping forces implicitly, providing the best numerical stability.</p>
<p><strong>Explicit actuators</strong> (<code class="docutils literal notranslate"><span class="pre">IdealPdActuator</span></code>, <code class="docutils literal notranslate"><span class="pre">DcMotorActuator</span></code>,
<code class="docutils literal notranslate"><span class="pre">LearnedMlpActuator</span></code>): Compute torques explicitly so the simulator cannot
account for velocity derivatives. Use when you need custom control laws or
actuator dynamics that can’t be expressed with built-in types (e.g.,
velocity-dependent torque limits, learned actuator networks).</p>
<p><strong>XML actuators</strong> (<code class="docutils literal notranslate"><span class="pre">XmlPositionActuator</span></code>, <code class="docutils literal notranslate"><span class="pre">XmlMotorActuator</span></code>,
<code class="docutils literal notranslate"><span class="pre">XmlVelocityActuator</span></code>): Wrap actuators already defined in your robot’s XML
file.</p>
<p><strong>Delayed actuators</strong> (<code class="docutils literal notranslate"><span class="pre">DelayedActuator</span></code>): Generic wrapper that adds command
delays to any actuator type. Use for modeling communication latency.</p>
</section>
<section id="tl-dr">
<h2>TL;DR<a class="headerlink" href="#tl-dr" title="Link to this heading">#</a></h2>
<p><strong>Basic PD control:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mjlab.actuator</span><span class="w"> </span><span class="kn">import</span> <span class="n">BuiltinPositionActuatorCfg</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mjlab.entity</span><span class="w"> </span><span class="kn">import</span> <span class="n">EntityCfg</span><span class="p">,</span> <span class="n">EntityArticulationInfoCfg</span>

<span class="n">robot_cfg</span> <span class="o">=</span> <span class="n">EntityCfg</span><span class="p">(</span>
    <span class="n">spec_fn</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">load_robot_spec</span><span class="p">(),</span>
    <span class="n">articulation</span><span class="o">=</span><span class="n">EntityArticulationInfoCfg</span><span class="p">(</span>
        <span class="n">actuators</span><span class="o">=</span><span class="p">(</span>
            <span class="n">BuiltinPositionActuatorCfg</span><span class="p">(</span>
                <span class="n">target_names_expr</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;.*_hip_.*&quot;</span><span class="p">,</span> <span class="s2">&quot;.*_knee_.*&quot;</span><span class="p">),</span>
                <span class="n">stiffness</span><span class="o">=</span><span class="mf">80.0</span><span class="p">,</span>
                <span class="n">damping</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span>
                <span class="n">effort_limit</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">),</span>
    <span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>Add delays:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mjlab.actuator</span><span class="w"> </span><span class="kn">import</span> <span class="n">DelayedActuatorCfg</span><span class="p">,</span> <span class="n">BuiltinPositionActuatorCfg</span>

<span class="n">DelayedActuatorCfg</span><span class="p">(</span>
    <span class="n">base_cfg</span><span class="o">=</span><span class="n">BuiltinPositionActuatorCfg</span><span class="p">(</span>
        <span class="n">target_names_expr</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;.*&quot;</span><span class="p">,),</span>
        <span class="n">stiffness</span><span class="o">=</span><span class="mf">80.0</span><span class="p">,</span>
        <span class="n">damping</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">delay_target</span><span class="o">=</span><span class="s2">&quot;position&quot;</span><span class="p">,</span>
    <span class="n">delay_min_lag</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>  <span class="c1"># Minimum 2 physics steps</span>
    <span class="n">delay_max_lag</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>  <span class="c1"># Maximum 5 physics steps</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="actuator-interface">
<h2>Actuator Interface<a class="headerlink" href="#actuator-interface" title="Link to this heading">#</a></h2>
<p>All actuators implement a unified <code class="docutils literal notranslate"><span class="pre">compute()</span></code> interface that receives an
<code class="docutils literal notranslate"><span class="pre">ActuatorCmd</span></code> (containing position, velocity, and effort targets) and returns
control signals for the low-level MuJoCo actuators driving each joint. The
abstraction provides lifecycle hooks for model modification, initialization,
reset, and runtime updates.</p>
<p><strong>Core interface:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">compute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmd</span><span class="p">:</span> <span class="n">ActuatorCmd</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert high-level commands to control signals.</span>

<span class="sd">    Args:</span>
<span class="sd">        cmd: Command containing position_target, velocity_target, effort_target</span>
<span class="sd">            (each is a [num_envs, num_targets] tensor or None)</span>

<span class="sd">    Returns:</span>
<span class="sd">        Control signals for this actuator ([num_envs, num_targets] tensor)</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
<p><strong>Lifecycle hooks:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">edit_spec</span></code>: Modify MjSpec before compilation (add actuators, set gains)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">initialize</span></code>: Post-compilation setup (resolve indices, allocate buffers)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reset</span></code>: Per-environment reset logic</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">update</span></code>: Pre-step updates</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">compute</span></code>: Convert commands to control signals</p></li>
</ul>
<p><strong>Properties:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">target_ids</span></code>: Tensor of local target indices controlled by this actuator</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">target_names</span></code>: List of target names controlled by this actuator</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ctrl_ids</span></code>: Tensor of global control input indices for this actuator</p></li>
</ul>
</section>
<section id="actuator-types">
<h2>Actuator Types<a class="headerlink" href="#actuator-types" title="Link to this heading">#</a></h2>
<section id="built-in-actuators">
<h3>Built-in Actuators<a class="headerlink" href="#built-in-actuators" title="Link to this heading">#</a></h3>
<p>Built-in actuators use MuJoCo’s native actuator types via the MjSpec API. The physics
engine computes the control law and integrates velocity-dependent damping forces
implicitly, providing best numerical stability.</p>
<p><strong>BuiltinPositionActuator</strong>: Creates <code class="docutils literal notranslate"><span class="pre">&lt;position&gt;</span></code> actuators for PD control.</p>
<p><strong>BuiltinVelocityActuator</strong>: Creates <code class="docutils literal notranslate"><span class="pre">&lt;velocity&gt;</span></code> actuators for velocity control.</p>
<p><strong>BuiltinMotorActuator</strong>: Creates <code class="docutils literal notranslate"><span class="pre">&lt;motor&gt;</span></code> actuators for direct torque control.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mjlab.actuator</span><span class="w"> </span><span class="kn">import</span> <span class="n">BuiltinPositionActuatorCfg</span><span class="p">,</span> <span class="n">BuiltinVelocityActuatorCfg</span>

<span class="c1"># Mobile manipulator: PD for arm joints, velocity control for wheels.</span>
<span class="n">actuators</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">BuiltinPositionActuatorCfg</span><span class="p">(</span>
        <span class="n">target_names_expr</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;.*_shoulder_.*&quot;</span><span class="p">,</span> <span class="s2">&quot;.*_elbow_.*&quot;</span><span class="p">,</span> <span class="s2">&quot;.*_wrist_.*&quot;</span><span class="p">),</span>
        <span class="n">stiffness</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span>
        <span class="n">damping</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span>
        <span class="n">effort_limit</span><span class="o">=</span><span class="mf">150.0</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">BuiltinVelocityActuatorCfg</span><span class="p">(</span>
        <span class="n">target_names_expr</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;.*_wheel_.*&quot;</span><span class="p">,),</span>
        <span class="n">damping</span><span class="o">=</span><span class="mf">20.0</span><span class="p">,</span>
        <span class="n">effort_limit</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="explicit-actuators">
<h3>Explicit Actuators<a class="headerlink" href="#explicit-actuators" title="Link to this heading">#</a></h3>
<p>These actuators explicitly compute efforts and forward them to an underlying &lt;motor&gt;
actuator acting as a passthrough. This enables custom control laws and actuator
dynamics that can’t be expressed with built-in types.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Explicit actuators may be less numerically stable
than built-in actuators because the integrator cannot account for the
velocity derivatives of the control forces, especially with high damping
gains.</p>
</div>
<p><strong>IdealPdActuator</strong>: Base class that implements an ideal PD controller.</p>
<p><strong>DcMotorActuator</strong>: Example of a more realistic actuator model built on top
of <code class="docutils literal notranslate"><span class="pre">IdealPdActuator</span></code>. Adds velocity-dependent torque saturation to model DC
motor torque-speed curves (back-EMF effects). It implements a linear
torque-speed curve: maximum torque at zero velocity, zero torque at maximum
velocity.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mjlab.actuator</span><span class="w"> </span><span class="kn">import</span> <span class="n">IdealPdActuatorCfg</span><span class="p">,</span> <span class="n">DcMotorActuatorCfg</span>

<span class="c1"># Ideal PD for hips, DC motor model with torque-speed curve for knees.</span>
<span class="n">actuators</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">IdealPdActuatorCfg</span><span class="p">(</span>
        <span class="n">target_names_expr</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;.*_hip_.*&quot;</span><span class="p">,),</span>
        <span class="n">stiffness</span><span class="o">=</span><span class="mf">80.0</span><span class="p">,</span>
        <span class="n">damping</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span>
        <span class="n">effort_limit</span><span class="o">=</span><span class="mf">100.0</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">DcMotorActuatorCfg</span><span class="p">(</span>
        <span class="n">target_names_expr</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;.*_knee_.*&quot;</span><span class="p">,),</span>
        <span class="n">stiffness</span><span class="o">=</span><span class="mf">80.0</span><span class="p">,</span>
        <span class="n">damping</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span>
        <span class="n">effort_limit</span><span class="o">=</span><span class="mf">25.0</span><span class="p">,</span>       <span class="c1"># Continuous torque limit</span>
        <span class="n">saturation_effort</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span>  <span class="c1"># Peak torque at stall</span>
        <span class="n">velocity_limit</span><span class="o">=</span><span class="mf">30.0</span><span class="p">,</span>     <span class="c1"># No-load speed (rad/s)</span>
    <span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>DcMotorActuator parameters:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">saturation_effort</span></code>: Peak motor torque at zero velocity (stall torque)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">velocity_limit</span></code>: Maximum motor velocity (no-load speed, <em>rad/s</em>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">effort_limit</span></code>: Continuous torque limit (from base class)</p></li>
</ul>
<p><strong>LearnedMlpActuator</strong>: Neural network-based actuator that uses a trained MLP
to predict torque outputs from joint state history. Useful when analytical
models can’t capture complex actuator dynamics like delays, nonlinearities, and
friction effects. Inherits DC motor velocity-based torque limits.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mjlab.actuator</span><span class="w"> </span><span class="kn">import</span> <span class="n">LearnedMlpActuatorCfg</span>

<span class="n">actuators</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">LearnedMlpActuatorCfg</span><span class="p">(</span>
        <span class="n">target_names_expr</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;.*_ankle_.*&quot;</span><span class="p">,),</span>
        <span class="n">network_file</span><span class="o">=</span><span class="s2">&quot;models/ankle_actuator.pt&quot;</span><span class="p">,</span>  <span class="c1"># TorchScript model</span>
        <span class="n">pos_scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>        <span class="c1"># Input scaling for position errors</span>
        <span class="n">vel_scale</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span>       <span class="c1"># Input scaling for velocities</span>
        <span class="n">torque_scale</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span>    <span class="c1"># Output scaling for torques</span>
        <span class="n">input_order</span><span class="o">=</span><span class="s2">&quot;pos_vel&quot;</span><span class="p">,</span>
        <span class="n">history_length</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>     <span class="c1"># Use current + 2 previous timesteps</span>
        <span class="n">saturation_effort</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span>
        <span class="n">velocity_limit</span><span class="o">=</span><span class="mf">30.0</span><span class="p">,</span>
        <span class="n">effort_limit</span><span class="o">=</span><span class="mf">25.0</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>LearnedMlpActuator parameters:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">network_file</span></code>: Path to TorchScript MLP model (<code class="docutils literal notranslate"><span class="pre">.pt</span></code> file)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pos_scale</span></code>: Scaling factor for position error inputs</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vel_scale</span></code>: Scaling factor for velocity inputs</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">torque_scale</span></code>: Scaling factor for network torque outputs</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">input_order</span></code>: <code class="docutils literal notranslate"><span class="pre">pos_vel</span></code> (position then velocity) or <code class="docutils literal notranslate"><span class="pre">vel_pos</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">history_length</span></code>: Number of timesteps to use (e.g., 3 = current + 2 past)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">saturation_effort</span></code>, <code class="docutils literal notranslate"><span class="pre">velocity_limit</span></code>, <code class="docutils literal notranslate"><span class="pre">effort_limit</span></code>: Same as
DcMotorActuator</p></li>
</ul>
<p>The network receives scaled inputs
<code class="docutils literal notranslate"><span class="pre">[pos_error[t],</span> <span class="pre">pos_error[t-1],</span> <span class="pre">...,</span> <span class="pre">vel[t],</span> <span class="pre">vel[t-1],</span> <span class="pre">...]</span></code> and outputs torques
that are scaled and clipped by DC motor limits.</p>
</section>
<section id="xml-actuators">
<h3>XML Actuators<a class="headerlink" href="#xml-actuators" title="Link to this heading">#</a></h3>
<p>XML actuators wrap actuators already defined in your robot’s XML file. The
config finds existing actuators by matching their <code class="docutils literal notranslate"><span class="pre">target</span></code> joint name against
the <code class="docutils literal notranslate"><span class="pre">target_names_expr</span></code> patterns. Each joint must have exactly one matching
actuator.</p>
<p><strong>XmlPositionActuator</strong>: Wraps existing <code class="docutils literal notranslate"><span class="pre">&lt;position&gt;</span></code> actuators</p>
<p><strong>XmlVelocityActuator</strong>: Wraps existing <code class="docutils literal notranslate"><span class="pre">&lt;velocity&gt;</span></code> actuators</p>
<p><strong>XmlMotorActuator</strong>: Wraps existing <code class="docutils literal notranslate"><span class="pre">&lt;motor&gt;</span></code> actuators</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mjlab.actuator</span><span class="w"> </span><span class="kn">import</span> <span class="n">XmlPositionActuatorCfg</span>

<span class="c1"># Robot XML already has:</span>
<span class="c1"># &lt;actuator&gt;</span>
<span class="c1">#   &lt;position name=&quot;hip_joint&quot; joint=&quot;hip_joint&quot; kp=&quot;100&quot;/&gt;</span>
<span class="c1"># &lt;/actuator&gt;</span>

<span class="c1"># Wrap existing XML actuators.</span>
<span class="n">actuators</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">XmlPositionActuatorCfg</span><span class="p">(</span><span class="n">target_names_expr</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;hip_joint&quot;</span><span class="p">,)),</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="delayed-actuator">
<h3>Delayed Actuator<a class="headerlink" href="#delayed-actuator" title="Link to this heading">#</a></h3>
<p>Generic wrapper that adds command delays to any actuator. Useful for modeling
actuator latency and communication delays. The delay operates on command
targets before they reach the actuator’s control law.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mjlab.actuator</span><span class="w"> </span><span class="kn">import</span> <span class="n">DelayedActuatorCfg</span><span class="p">,</span> <span class="n">IdealPdActuatorCfg</span>

<span class="c1"># Add 2-5 step delay to position commands.</span>
<span class="n">actuators</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">DelayedActuatorCfg</span><span class="p">(</span>
        <span class="n">base_cfg</span><span class="o">=</span><span class="n">IdealPdActuatorCfg</span><span class="p">(</span>
            <span class="n">target_names_expr</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;.*&quot;</span><span class="p">,),</span>
            <span class="n">stiffness</span><span class="o">=</span><span class="mf">80.0</span><span class="p">,</span>
            <span class="n">damping</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">delay_target</span><span class="o">=</span><span class="s2">&quot;position&quot;</span><span class="p">,</span>     <span class="c1"># Delay position commands</span>
        <span class="n">delay_min_lag</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">delay_max_lag</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="n">delay_hold_prob</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>         <span class="c1"># 30% chance to keep previous lag</span>
        <span class="n">delay_update_period</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>      <span class="c1"># Update lag every 10 steps</span>
    <span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>Multi-target delays:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">DelayedActuatorCfg</span><span class="p">(</span>
    <span class="n">base_cfg</span><span class="o">=</span><span class="n">IdealPdActuatorCfg</span><span class="p">(</span><span class="o">...</span><span class="p">),</span>
    <span class="n">delay_target</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;position&quot;</span><span class="p">,</span> <span class="s2">&quot;velocity&quot;</span><span class="p">,</span> <span class="s2">&quot;effort&quot;</span><span class="p">),</span>
    <span class="n">delay_min_lag</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">delay_max_lag</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Delays are quantized to physics timesteps. For example, with 500Hz physics
(2ms/step), <code class="docutils literal notranslate"><span class="pre">delay_min_lag=2</span></code> represents a 4ms minimum delay.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Each target gets an independent delay buffer with its own lag
schedule. This provides maximum flexibility for modeling different latency
characteristics for position, velocity, and effort commands.</p>
</div>
</section>
</section>
<section id="pd-control-and-integrator-choice">
<h2>PD Control and Integrator Choice<a class="headerlink" href="#pd-control-and-integrator-choice" title="Link to this heading">#</a></h2>
<p>The distinction between <strong>built-in</strong> and <strong>explicit</strong> PD control only makes sense
in the context of how MuJoCo integrates velocity-dependent forces. This section
explains how each actuator style interacts with the integrator, and why
mjlab uses <code class="docutils literal notranslate"><span class="pre">&lt;implicitfast&gt;</span></code> <strong>by default</strong>.</p>
<section id="built-in-vs-explicit-pd-control">
<h3>Built-in vs Explicit PD Control<a class="headerlink" href="#built-in-vs-explicit-pd-control" title="Link to this heading">#</a></h3>
<p><strong>BuiltinPositionActuator</strong> uses MuJoCo’s internal PD implementation:</p>
<ul class="simple">
<li><p>Creates <code class="docutils literal notranslate"><span class="pre">&lt;position&gt;</span></code> actuators in the MjSpec</p></li>
<li><p>Physics engine computes the PD law and integrates velocity-dependent damping
forces implicitly</p></li>
</ul>
<p><strong>IdealPdActuator</strong> implements PD control explicitly:</p>
<ul class="simple">
<li><p>Creates <code class="docutils literal notranslate"><span class="pre">&lt;motor&gt;</span></code> actuators in the MjSpec</p></li>
<li><p>Computes torques explicitly: <code class="docutils literal notranslate"><span class="pre">τ</span> <span class="pre">=</span> <span class="pre">Kp·pos_error</span> <span class="pre">+</span> <span class="pre">Kd·vel_error</span></code></p></li>
<li><p>The integrator cannot account for the velocity derivatives of these forces</p></li>
</ul>
<p>They match closely in the linear, unconstrained regime and small time steps.
However, built-in PD is more numerically robust and as such can be used with
larger gains and larger timesteps.</p>
</section>
<section id="integrator-behavior-in-mujoco">
<h3>Integrator Behavior in MuJoCo<a class="headerlink" href="#integrator-behavior-in-mujoco" title="Link to this heading">#</a></h3>
<p>The choice of integrator in MuJoCo strongly affects stability for
velocity-dependent forces:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">euler</span></code> is semi-implicit but treats joint damping implicitly. Other
forces, including explicit actuator damping, are integrated explicitly.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">implicitfast</span></code> treats <em>all known velocity-dependent forces implicitly</em>,
stabilizing systems with large damping or stiff actuation.</p></li>
</ul>
</section>
<section id="mjlab-recommendation">
<h3>mjlab Recommendation<a class="headerlink" href="#mjlab-recommendation" title="Link to this heading">#</a></h3>
<p>mjlab actuators apply damping inside the actuator (not in joints). Because of
this, <strong>Euler</strong> cannot integrate the damping implicitly, making it less stable.
The <code class="docutils literal notranslate"><span class="pre">implicitfast</span></code> integrator, however, handles both proportional and
damping terms of the actuator implicitly, improving stability without
additional cost.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>mjlab defaults to <code class="docutils literal notranslate"><span class="pre">&lt;implicitfast&gt;</span></code>, as it is MuJoCo’s recommended
integrator and provides superior stability for actuator-side damping.</p>
</div>
</section>
</section>
<section id="authoring-actuator-configs">
<h2>Authoring Actuator Configs<a class="headerlink" href="#authoring-actuator-configs" title="Link to this heading">#</a></h2>
<p>Since actuator parameters are uniform within each config, use separate actuator
configs for joints that need different parameters:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mjlab.actuator</span><span class="w"> </span><span class="kn">import</span> <span class="n">BuiltinPositionActuatorCfg</span>

<span class="c1"># G1 humanoid with different gains per joint group.</span>
<span class="n">G1_ACTUATORS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">BuiltinPositionActuatorCfg</span><span class="p">(</span>
        <span class="n">target_names_expr</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;.*_hip_.*&quot;</span><span class="p">,</span> <span class="s2">&quot;waist_yaw_joint&quot;</span><span class="p">),</span>
        <span class="n">stiffness</span><span class="o">=</span><span class="mf">180.0</span><span class="p">,</span>
        <span class="n">damping</span><span class="o">=</span><span class="mf">18.0</span><span class="p">,</span>
        <span class="n">effort_limit</span><span class="o">=</span><span class="mf">88.0</span><span class="p">,</span>
        <span class="n">armature</span><span class="o">=</span><span class="mf">0.0015</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">BuiltinPositionActuatorCfg</span><span class="p">(</span>
        <span class="n">target_names_expr</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;left_hip_pitch_joint&quot;</span><span class="p">,</span> <span class="s2">&quot;right_hip_pitch_joint&quot;</span><span class="p">),</span>
        <span class="n">stiffness</span><span class="o">=</span><span class="mf">200.0</span><span class="p">,</span>
        <span class="n">damping</span><span class="o">=</span><span class="mf">20.0</span><span class="p">,</span>
        <span class="n">effort_limit</span><span class="o">=</span><span class="mf">88.0</span><span class="p">,</span>
        <span class="n">armature</span><span class="o">=</span><span class="mf">0.0015</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">BuiltinPositionActuatorCfg</span><span class="p">(</span>
        <span class="n">target_names_expr</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;.*_knee_joint&quot;</span><span class="p">,),</span>
        <span class="n">stiffness</span><span class="o">=</span><span class="mf">150.0</span><span class="p">,</span>
        <span class="n">damping</span><span class="o">=</span><span class="mf">15.0</span><span class="p">,</span>
        <span class="n">effort_limit</span><span class="o">=</span><span class="mf">139.0</span><span class="p">,</span>
        <span class="n">armature</span><span class="o">=</span><span class="mf">0.0025</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">BuiltinPositionActuatorCfg</span><span class="p">(</span>
        <span class="n">target_names_expr</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;.*_ankle_.*&quot;</span><span class="p">,),</span>
        <span class="n">stiffness</span><span class="o">=</span><span class="mf">40.0</span><span class="p">,</span>
        <span class="n">damping</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span>
        <span class="n">effort_limit</span><span class="o">=</span><span class="mf">25.0</span><span class="p">,</span>
        <span class="n">armature</span><span class="o">=</span><span class="mf">0.0008</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This design choice reflects a deliberate simplification in mjlab: each
<code class="docutils literal notranslate"><span class="pre">ActuatorCfg</span></code> represents a single actuator type (e.g., a specific motor/gearbox
model) applied uniformly across all joints it drives. Hardware parameters such
as <code class="docutils literal notranslate"><span class="pre">armature</span></code> (reflected rotor inertia) and <code class="docutils literal notranslate"><span class="pre">gear</span></code> describe properties of the
actuator hardware, even though they are implemented in MuJoCo as joint or
actuator fields. In other frameworks (like Isaac Lab), these fields may accept
<code class="docutils literal notranslate"><span class="pre">float</span> <span class="pre">|</span> <span class="pre">dict[str,</span> <span class="pre">float]</span></code> to support per-joint variation. mjlab instead
encourages one config per actuator type or per joint group, keeping the hardware
model physically consistent and explicit. The main trade-off is verbosity in
special cases, such as parallel linkages, where per-joint overrides could have
been convenient, but the benefit is clearer semantics and simpler maintenance.</p>
<section id="computing-hardware-parameters-from-motor-specs">
<h3>Computing Hardware Parameters from Motor Specs<a class="headerlink" href="#computing-hardware-parameters-from-motor-specs" title="Link to this heading">#</a></h3>
<p>mjlab provides utilities in <code class="docutils literal notranslate"><span class="pre">mjlab.utils.actuator</span></code> to compute actuator
parameters from physical motor specifications. This is particularly useful for
computing reflected inertia (<code class="docutils literal notranslate"><span class="pre">armature</span></code>) and deriving appropriate control gains
from hardware datasheets.</p>
<p><strong>Example: Unitree G1 motor configuration</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">math</span><span class="w"> </span><span class="kn">import</span> <span class="n">pi</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">mjlab.utils.actuator</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">reflected_inertia_from_two_stage_planetary</span><span class="p">,</span>
    <span class="n">ElectricActuator</span>
<span class="p">)</span>

<span class="c1"># Motor specs from manufacturer datasheet.</span>
<span class="n">ROTOR_INERTIAS_7520_14</span> <span class="o">=</span> <span class="p">(</span>
    <span class="mf">0.489e-4</span><span class="p">,</span>  <span class="c1"># Motor rotor inertia (kg·m**2)</span>
    <span class="mf">0.098e-4</span><span class="p">,</span>  <span class="c1"># Planet carrier inertia</span>
    <span class="mf">0.533e-4</span><span class="p">,</span>  <span class="c1"># Output stage inertia</span>
<span class="p">)</span>
<span class="n">GEARS_7520_14</span> <span class="o">=</span> <span class="p">(</span>
    <span class="mi">1</span><span class="p">,</span>            <span class="c1"># First stage (motor to planet)</span>
    <span class="mf">4.5</span><span class="p">,</span>          <span class="c1"># Second stage (planet to carrier)</span>
    <span class="mi">1</span> <span class="o">+</span> <span class="p">(</span><span class="mi">48</span><span class="o">/</span><span class="mi">22</span><span class="p">),</span>  <span class="c1"># Third stage (carrier to output)</span>
<span class="p">)</span>

<span class="c1"># Compute reflected inertia at joint output.</span>
<span class="c1"># J_reflected = J_motor*(N₁*N₂)**2 + J_carrier*N₂**2 + J_output.</span>
<span class="n">ARMATURE_7520_14</span> <span class="o">=</span> <span class="n">reflected_inertia_from_two_stage_planetary</span><span class="p">(</span>
    <span class="n">ROTOR_INERTIAS_7520_14</span><span class="p">,</span> <span class="n">GEARS_7520_14</span>
<span class="p">)</span>

<span class="c1"># Create motor spec container.</span>
<span class="n">ACTUATOR_7520_14</span> <span class="o">=</span> <span class="n">ElectricActuator</span><span class="p">(</span>
    <span class="n">reflected_inertia</span><span class="o">=</span><span class="n">ARMATURE_7520_14</span><span class="p">,</span>
    <span class="n">velocity_limit</span><span class="o">=</span><span class="mf">32.0</span><span class="p">,</span>   <span class="c1"># rad/s at joint</span>
    <span class="n">effort_limit</span><span class="o">=</span><span class="mf">88.0</span><span class="p">,</span>     <span class="c1"># N·m continuous torque</span>
<span class="p">)</span>

<span class="c1"># Derive PD gains from natural frequency and damping ratio.</span>
<span class="n">NATURAL_FREQ</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="mi">2</span><span class="o">*</span><span class="n">pi</span>  <span class="c1"># 10 Hz bandwidth.</span>
<span class="n">DAMPING_RATIO</span> <span class="o">=</span> <span class="mf">2.0</span>       <span class="c1"># Overdamped, see note below.</span>
<span class="n">STIFFNESS</span> <span class="o">=</span> <span class="n">ARMATURE_7520_14</span> <span class="o">*</span> <span class="n">NATURAL_FREQ</span><span class="o">**</span><span class="mi">2</span>
<span class="n">DAMPING</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">DAMPING_RATIO</span> <span class="o">*</span> <span class="n">ARMATURE_7520_14</span> <span class="o">*</span> <span class="n">NATURAL_FREQ</span>

<span class="c1"># Use in actuator config.</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mjlab.actuator</span><span class="w"> </span><span class="kn">import</span> <span class="n">BuiltinPositionActuatorCfg</span>

<span class="n">actuator</span> <span class="o">=</span> <span class="n">BuiltinPositionActuatorCfg</span><span class="p">(</span>
    <span class="n">target_names_expr</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;.*_hip_pitch_joint&quot;</span><span class="p">,),</span>
    <span class="n">stiffness</span><span class="o">=</span><span class="n">STIFFNESS</span><span class="p">,</span>
    <span class="n">damping</span><span class="o">=</span><span class="n">DAMPING</span><span class="p">,</span>
    <span class="n">effort_limit</span><span class="o">=</span><span class="n">ACTUATOR_7520_14</span><span class="o">.</span><span class="n">effort_limit</span><span class="p">,</span>
    <span class="n">armature</span><span class="o">=</span><span class="n">ACTUATOR_7520_14</span><span class="o">.</span><span class="n">reflected_inertia</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The example uses <cite>DAMPING_RATIO = 2.0</cite>
(overdamped) rather than the critically damped value of 1.0. This is because
the reflected inertia calculation only accounts for the motor’s rotor inertia,
not the apparent inertia of the links being moved. In practice, the total
effective inertia at the joint is higher than just the reflected motor inertia,
so using an overdamped ratio provides better stability margins when the true
system inertia is underestimated.</p>
</div>
<p><strong>Parallel linkage approximation:</strong></p>
<p>For joints driven by parallel linkages (like the G1’s ankles with dual motors),
the effective armature in the nominal configuration can be approximated as the
sum of the individual motor armatures:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Two 5020 motors driving ankle through parallel linkage.</span>
<span class="n">G1_ACTUATOR_ANKLE</span> <span class="o">=</span> <span class="n">BuiltinPositionActuatorCfg</span><span class="p">(</span>
    <span class="n">target_names_expr</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;.*_ankle_pitch_joint&quot;</span><span class="p">,</span> <span class="s2">&quot;.*_ankle_roll_joint&quot;</span><span class="p">),</span>
    <span class="n">stiffness</span><span class="o">=</span><span class="n">STIFFNESS_5020</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">damping</span><span class="o">=</span><span class="n">DAMPING_5020</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">effort_limit</span><span class="o">=</span><span class="n">ACTUATOR_5020</span><span class="o">.</span><span class="n">effort_limit</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">armature</span><span class="o">=</span><span class="n">ACTUATOR_5020</span><span class="o">.</span><span class="n">reflected_inertia</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="using-actuators-in-environments">
<h2>Using Actuators in Environments<a class="headerlink" href="#using-actuators-in-environments" title="Link to this heading">#</a></h2>
<section id="action-terms">
<h3>Action Terms<a class="headerlink" href="#action-terms" title="Link to this heading">#</a></h3>
<p>Actuators are typically controlled via action terms in the action manager:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mjlab.envs.mdp.actions</span><span class="w"> </span><span class="kn">import</span> <span class="n">JointPositionActionCfg</span>

<span class="n">JointPositionActionCfg</span><span class="p">(</span>
    <span class="n">entity_name</span><span class="o">=</span><span class="s2">&quot;robot&quot;</span><span class="p">,</span>
    <span class="n">actuator_names</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;.*&quot;</span><span class="p">,),</span>  <span class="c1"># Regex patterns for joint selection</span>
    <span class="n">scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">use_default_offset</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="c1"># Use robot&#39;s default joint positions as offset</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>Available action terms:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">JointPositionAction</span></code>: Sets position targets (for PD actuators)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">JointVelocityAction</span></code>: Sets velocity targets (for velocity actuators)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">JointEffortAction</span></code>: Sets effort/torque targets (for torque actuators)</p></li>
</ul>
<p>The action manager calls <code class="docutils literal notranslate"><span class="pre">entity.set_joint_position_target()</span></code>,
<code class="docutils literal notranslate"><span class="pre">set_joint_velocity_target()</span></code>, or <code class="docutils literal notranslate"><span class="pre">set_joint_effort_target()</span></code> under the hood,
which populate the <code class="docutils literal notranslate"><span class="pre">ActuatorCmd</span></code> passed to each actuator’s <code class="docutils literal notranslate"><span class="pre">compute()</span></code> method.</p>
</section>
<section id="domain-randomization">
<h3>Domain Randomization<a class="headerlink" href="#domain-randomization" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">mjlab.envs.mdp</span><span class="w"> </span><span class="kn">import</span> <span class="n">events</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mjlab.managers.event_manager</span><span class="w"> </span><span class="kn">import</span> <span class="n">EventTermCfg</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">mjlab.managers.scene_entity_config</span><span class="w"> </span><span class="kn">import</span> <span class="n">SceneEntityCfg</span>

<span class="n">EventTermCfg</span><span class="p">(</span>
    <span class="n">func</span><span class="o">=</span><span class="n">events</span><span class="o">.</span><span class="n">randomize_pd_gains</span><span class="p">,</span>
    <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;reset&quot;</span><span class="p">,</span>
    <span class="n">params</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;entity_cfg&quot;</span><span class="p">:</span> <span class="n">SceneEntityCfg</span><span class="p">(</span><span class="s2">&quot;robot&quot;</span><span class="p">,</span> <span class="n">actuator_names</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;.*&quot;</span><span class="p">,)),</span>
        <span class="s2">&quot;kp_range&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">),</span>
        <span class="s2">&quot;kd_range&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">),</span>
        <span class="s2">&quot;distribution&quot;</span><span class="p">:</span> <span class="s2">&quot;uniform&quot;</span><span class="p">,</span>
        <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;scale&quot;</span><span class="p">,</span>  <span class="c1"># or &quot;abs&quot; for absolute values</span>
    <span class="p">},</span>
<span class="p">)</span>

<span class="n">EventTermCfg</span><span class="p">(</span>
    <span class="n">func</span><span class="o">=</span><span class="n">events</span><span class="o">.</span><span class="n">randomize_effort_limits</span><span class="p">,</span>
    <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;reset&quot;</span><span class="p">,</span>
    <span class="n">params</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;entity_cfg&quot;</span><span class="p">:</span> <span class="n">SceneEntityCfg</span><span class="p">(</span><span class="s2">&quot;robot&quot;</span><span class="p">,</span> <span class="n">actuator_names</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;.*_leg_.*&quot;</span><span class="p">,)),</span>
        <span class="s2">&quot;effort_limit_range&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span>  <span class="c1"># Reduce effort by 0-30%</span>
        <span class="s2">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;scale&quot;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="observation.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Observation History and Delay</p>
      </div>
    </a>
    <a class="right-next"
       href="sensors.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Sensors</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#choosing-an-actuator-type">Choosing an Actuator Type</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tl-dr">TL;DR</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#actuator-interface">Actuator Interface</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#actuator-types">Actuator Types</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#built-in-actuators">Built-in Actuators</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#explicit-actuators">Explicit Actuators</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#xml-actuators">XML Actuators</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#delayed-actuator">Delayed Actuator</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pd-control-and-integrator-choice">PD Control and Integrator Choice</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#built-in-vs-explicit-pd-control">Built-in vs Explicit PD Control</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#integrator-behavior-in-mujoco">Integrator Behavior in MuJoCo</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mjlab-recommendation">mjlab Recommendation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#authoring-actuator-configs">Authoring Actuator Configs</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#computing-hardware-parameters-from-motor-specs">Computing Hardware Parameters from Motor Specs</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-actuators-in-environments">Using Actuators in Environments</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#action-terms">Action Terms</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#domain-randomization">Domain Randomization</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The mjlab Developers
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025, The mjlab Developers.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    <p class="last-updated">
  Last updated on Jan 28, 2026.
  <br/>
</p>
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>